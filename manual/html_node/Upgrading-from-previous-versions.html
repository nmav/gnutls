<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is last updated 4 March 2015 for version
3.5.1 of GnuTLS.

Copyright (C) 2001-2015 Free Software Foundation, Inc.\\
Copyright (C) 2001-2015 Nikos Mavrogiannopoulos

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License". -->
<!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GnuTLS 3.5.1: Upgrading from previous versions</title>

<meta name="description" content="GnuTLS 3.5.1: Upgrading from previous versions">
<meta name="keywords" content="GnuTLS 3.5.1: Upgrading from previous versions">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Function-and-Data-Index.html#Function-and-Data-Index" rel="index" title="Function and Data Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="Support.html#Support" rel="next" title="Support">
<link href="Cryptographic-Backend.html#Cryptographic-Backend" rel="prev" title="Cryptographic Backend">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body { 
	margin: 2%;
	padding: 0 5%;
	background: #ffffff;
}
h1,h2,h3,h4,h5 {
    font-weight: bold;
    padding: 5px 5px 5px 5px;
    background-color: #c2e0ff;
    color: #336699;
}
h1 {
    padding: 2em 2em 2em 5%;
    color: white;
    background: #336699;
    text-align: center;
    letter-spacing: 3px;
}
h2 { text-decoration: underline; }
pre {
  margin: 0 5%;
  padding: 0.5em;
}
pre.example,pre.verbatim {
  padding-bottom: 1em;

  border: solid #c2e0ff;
  background: #f0faff;
  border-width: 1px 1px 1px 5px;
  margin: 1em auto;
  width: 90%;
}

div.node {
  margin: 0 -5% 0 -2%;
  padding: 0.5em 0.5em;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  font-weight: bold;
}
dd, li {
  padding-top: 0.1em;
  padding-bottom: 0.1em;
}
div.float {

  margin-bottom: 0.5em;
  text-align: center;
}

table {
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  border-spacing: 7px;
  width: 50%;
}

th {
  padding: 0;
  color: #336699;
  background-color: #c2e0ff;
  border: solid #000000;
  border-width: 0px;
  margin: 1em auto;
  text-align: center;
  margin-left:auto;
  margin-right:auto;
}

td {
  padding: 0;
  border: solid #000000;
  background-color: #f0faff;
  border-width: 0px;
  margin: 1em auto;
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  padding-left: 1em;
}

dl {
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  width: 50%;

  padding-left: 1em;
  border: solid #c2e0ff;
  background: #f0faff;
  border-width: 5px 1px 1px 1px;
  margin: 1em auto;
}

-->
</style>


</head>

<body lang="en">
<a name="Upgrading-from-previous-versions"></a>
<div class="header">
<p>
Next: <a href="Support.html#Support" accesskey="n" rel="next">Support</a>, Previous: <a href="Internal-architecture-of-GnuTLS.html#Internal-architecture-of-GnuTLS" accesskey="p" rel="prev">Internal architecture of GnuTLS</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Data-Index.html#Function-and-Data-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Upgrading-from-previous-versions-1"></a>
<h2 class="appendix">Appendix A Upgrading from previous versions</h2>
<a name="index-upgrading"></a>

<p>The GnuTLS library typically maintains binary and source code compatibility
across versions. The releases that have the major version increased
break binary compatibility but source compatibility is provided.
This section lists exceptional cases where changes to existing code are
required due to library changes.
</p>
<a name="Upgrading-to-2_002e12_002ex-from-previous-versions"></a>
<h3 class="heading">Upgrading to 2.12.x from previous versions</h3>

<p>GnuTLS 2.12.x is binary compatible with previous versions but changes the
semantics of <code>gnutls_transport_set_lowat</code>, which might cause breakage
in applications that relied on its default value be 1. Two fixes
are proposed:
</p><ul>
<li> Quick fix. Explicitly call <code>gnutls_transport_set_lowat (session, 1);</code>
after <a href="Core-TLS-API.html#gnutls_005finit">gnutls_init</a>.
</li><li> Long term fix. Because later versions of gnutls abolish the functionality 
of using the system call <code>select</code> to check for gnutls pending data, the 
function <a href="Core-TLS-API.html#gnutls_005frecord_005fcheck_005fpending">gnutls_record_check_pending</a> has to be used to achieve the same 
functionality as described in <a href="Asynchronous-operation.html#Asynchronous-operation">Asynchronous operation</a>.
</li></ul>

<a name="Upgrading-to-3_002e0_002ex-from-2_002e12_002ex"></a>
<h3 class="heading">Upgrading to 3.0.x from 2.12.x</h3>

<p>GnuTLS 3.0.x is source compatible with previous versions except for the functions
listed below.
</p>
<table>
<thead><tr><th width="30%">Old function</th><th width="60%">Replacement</th></tr></thead>
<tr><td width="30%"><code>gnutls_transport_set_lowat</code></td><td width="60%">To replace its functionality the function <a href="Core-TLS-API.html#gnutls_005frecord_005fcheck_005fpending">gnutls_record_check_pending</a> has to be used,
as described in <a href="Asynchronous-operation.html#Asynchronous-operation">Asynchronous operation</a></td></tr>
<tr><td width="30%"><code>gnutls_session_get_server_random</code>,
<code>gnutls_session_get_client_random</code></td><td width="60%">They are replaced by the safer function <a href="Core-TLS-API.html#gnutls_005fsession_005fget_005frandom">gnutls_session_get_random</a></td></tr>
<tr><td width="30%"><code>gnutls_session_get_master_secret</code></td><td width="60%">Replaced by the keying material exporters discussed in <a href="Deriving-keys-for-other-applications_002fprotocols.html#Deriving-keys-for-other-applications_002fprotocols">Deriving keys for other applications/protocols</a></td></tr>
<tr><td width="30%"><code>gnutls_transport_set_global_errno</code></td><td width="60%">Replaced by using the system&rsquo;s errno facility or <a href="Core-TLS-API.html#gnutls_005ftransport_005fset_005ferrno">gnutls_transport_set_errno</a>.</td></tr>
<tr><td width="30%"><code>gnutls_x509_privkey_verify_data</code></td><td width="60%">Replaced by <a href="Abstract-key-API.html#gnutls_005fpubkey_005fverify_005fdata2">gnutls_pubkey_verify_data2</a>.</td></tr>
<tr><td width="30%"><code>gnutls_certificate_verify_peers</code></td><td width="60%">Replaced by <a href="Core-TLS-API.html#gnutls_005fcertificate_005fverify_005fpeers2">gnutls_certificate_verify_peers2</a>.</td></tr>
<tr><td width="30%"><code>gnutls_psk_netconf_derive_key</code></td><td width="60%">Removed. The key derivation function was never standardized.</td></tr>
<tr><td width="30%"><code>gnutls_session_set_finished_function</code></td><td width="60%">Removed.</td></tr>
<tr><td width="30%"><code>gnutls_ext_register</code></td><td width="60%">Removed. Extension registration API is now internal to allow easier changes in the API.</td></tr>
<tr><td width="30%"><code>gnutls_certificate_get_x509_crls</code>, <code>gnutls_certificate_get_x509_cas</code></td><td width="60%">Removed to allow updating the internal structures. Replaced by <a href="Core-TLS-API.html#gnutls_005fcertificate_005fget_005fissuer">gnutls_certificate_get_issuer</a>.</td></tr>
<tr><td width="30%"><code>gnutls_certificate_get_openpgp_keyring</code></td><td width="60%">Removed.</td></tr>
<tr><td width="30%"><code>gnutls_ia_</code></td><td width="60%">Removed. The inner application extensions were completely removed (they failed to be standardized).</td></tr>
</table>

<a name="Upgrading-to-3_002e1_002ex-from-3_002e0_002ex"></a>
<h3 class="heading">Upgrading to 3.1.x from 3.0.x</h3>

<p>GnuTLS 3.1.x is source and binary compatible with GnuTLS 3.0.x releases. Few
functions have been deprecated and are listed below.
</p>
<table>
<thead><tr><th width="30%">Old function</th><th width="60%">Replacement</th></tr></thead>
<tr><td width="30%"><code>gnutls_pubkey_verify_hash</code></td><td width="60%">The function <a href="Abstract-key-API.html#gnutls_005fpubkey_005fverify_005fhash2">gnutls_pubkey_verify_hash2</a> is provided and
is functionally equivalent and safer to use.</td></tr>
<tr><td width="30%"><code>gnutls_pubkey_verify_data</code></td><td width="60%">The function <a href="Abstract-key-API.html#gnutls_005fpubkey_005fverify_005fdata2">gnutls_pubkey_verify_data2</a> is provided and
is functionally equivalent and safer to use.</td></tr>
</table>

<a name="Upgrading-to-3_002e2_002ex-from-3_002e1_002ex"></a>
<h3 class="heading">Upgrading to 3.2.x from 3.1.x</h3>

<p>GnuTLS 3.2.x is source and binary compatible with GnuTLS 3.1.x releases. Few
functions have been deprecated and are listed below.
</p>
<table>
<thead><tr><th width="30%">Old function</th><th width="60%">Replacement</th></tr></thead>
<tr><td width="30%"><code>gnutls_privkey_sign_raw_data</code></td><td width="60%">The function <a href="Abstract-key-API.html#gnutls_005fprivkey_005fsign_005fhash">gnutls_privkey_sign_hash</a> is equivalent
when the flag <code>GNUTLS_PRIVKEY_SIGN_FLAG_TLS1_RSA</code> is specified.</td></tr>
</table>

<a name="Upgrading-to-3_002e3_002ex-from-3_002e2_002ex"></a>
<h3 class="heading">Upgrading to 3.3.x from 3.2.x</h3>

<p>GnuTLS 3.3.x is source and binary compatible with GnuTLS 3.2.x releases;
however there few changes in semantics which are listed below.
</p>
<table>
<thead><tr><th width="30%">Old function</th><th width="60%">Replacement</th></tr></thead>
<tr><td width="30%"><code>gnutls_global_init</code></td><td width="60%">No longer required. The library is initialized using a constructor.</td></tr>
<tr><td width="30%"><code>gnutls_global_deinit</code></td><td width="60%">No longer required. The library is deinitialized using a destructor.</td></tr>
</table>

<a name="Upgrading-to-3_002e4_002ex-from-3_002e3_002ex"></a>
<h3 class="heading">Upgrading to 3.4.x from 3.3.x</h3>

<p>GnuTLS 3.4.x is source compatible with GnuTLS 3.3.x releases;
however, several deprecated functions were removed, and are listed below.
</p>
<table>
<thead><tr><th width="30%">Old function</th><th width="60%">Replacement</th></tr></thead>
<tr><td width="30%">Priority string &quot;NORMAL&quot; has been modified</td><td width="60%">The following string emulates the 3.3.x behavior &quot;NORMAL:+VERS-SSL3.0:+ARCFOUR-128:+DHE-DSS:+SIGN-DSA-SHA512:+SIGN-DSA-SHA256:+SIGN-DSA-SHA1&quot;</td></tr>
<tr><td width="30%"><code>gnutls_certificate_client_set_retrieve_function</code>,
<code>gnutls_certificate_server_set_retrieve_function</code></td><td width="60%"><a href="Core-TLS-API.html#gnutls_005fcertificate_005fset_005fretrieve_005ffunction">gnutls_certificate_set_retrieve_function</a></td></tr>
<tr><td width="30%"><code>gnutls_certificate_set_rsa_export_params</code>,
<code>gnutls_rsa_export_get_modulus_bits</code>,
<code>gnutls_rsa_export_get_pubkey</code>,
<code>gnutls_rsa_params_cpy</code>,
<code>gnutls_rsa_params_deinit</code>,
<code>gnutls_rsa_params_export_pkcs1</code>,
<code>gnutls_rsa_params_export_raw</code>,
<code>gnutls_rsa_params_generate2</code>,
<code>gnutls_rsa_params_import_pkcs1</code>,
<code>gnutls_rsa_params_import_raw</code>,
<code>gnutls_rsa_params_init</code></td><td width="60%">No replacement; the library does not support the RSA-EXPORT ciphersuites.</td></tr>
<tr><td width="30%"><code>gnutls_pubkey_verify_hash</code>,</td><td width="60%"><a href="Abstract-key-API.html#gnutls_005fpubkey_005fverify_005fhash2">gnutls_pubkey_verify_hash2</a>.</td></tr>
<tr><td width="30%"><code>gnutls_pubkey_verify_data</code>,</td><td width="60%"><a href="Abstract-key-API.html#gnutls_005fpubkey_005fverify_005fdata2">gnutls_pubkey_verify_data2</a>.</td></tr>
<tr><td width="30%"><code>gnutls_x509_crt_get_verify_algorithm</code>,</td><td width="60%">No replacement; a similar function is <a href="X509-certificate-API.html#gnutls_005fx509_005fcrt_005fget_005fsignature_005falgorithm">gnutls_x509_crt_get_signature_algorithm</a>.</td></tr>
<tr><td width="30%"><code>gnutls_pubkey_get_verify_algorithm</code>,</td><td width="60%">No replacement; a similar function is <a href="Abstract-key-API.html#gnutls_005fpubkey_005fget_005fpreferred_005fhash_005falgorithm">gnutls_pubkey_get_preferred_hash_algorithm</a>.</td></tr>
<tr><td width="30%"><code>gnutls_certificate_type_set_priority</code>,
<code>gnutls_cipher_set_priority</code>,
<code>gnutls_compression_set_priority</code>,
<code>gnutls_kx_set_priority</code>,
<code>gnutls_mac_set_priority</code>,
<code>gnutls_protocol_set_priority</code></td><td width="60%"><a href="Core-TLS-API.html#gnutls_005fpriority_005fset_005fdirect">gnutls_priority_set_direct</a>.</td></tr>
<tr><td width="30%"><code>gnutls_sign_callback_get</code>,
<code>gnutls_sign_callback_set</code></td><td width="60%"><a href="Abstract-key-API.html#gnutls_005fprivkey_005fimport_005fext3">gnutls_privkey_import_ext3</a></td></tr>
<tr><td width="30%"><code>gnutls_x509_crt_verify_hash</code></td><td width="60%"><a href="Abstract-key-API.html#gnutls_005fpubkey_005fverify_005fhash2">gnutls_pubkey_verify_hash2</a></td></tr>
<tr><td width="30%"><code>gnutls_x509_crt_verify_data</code></td><td width="60%"><a href="Abstract-key-API.html#gnutls_005fpubkey_005fverify_005fdata2">gnutls_pubkey_verify_data2</a></td></tr>
<tr><td width="30%"><code>gnutls_privkey_sign_raw_data</code></td><td width="60%"><a href="Abstract-key-API.html#gnutls_005fprivkey_005fsign_005fhash">gnutls_privkey_sign_hash</a> with the flag GNUTLS_PRIVKEY_SIGN_FLAG_TLS1_RSA</td></tr>
</table>

<hr>
<div class="header">
<p>
Next: <a href="Support.html#Support" accesskey="n" rel="next">Support</a>, Previous: <a href="Internal-architecture-of-GnuTLS.html#Internal-architecture-of-GnuTLS" accesskey="p" rel="prev">Internal architecture of GnuTLS</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Data-Index.html#Function-and-Data-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
