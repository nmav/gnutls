<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is last updated 4 March 2015 for version
3.4.2 of GnuTLS.

Copyright (C) 2001-2015 Free Software Foundation, Inc.\\
Copyright (C) 2001-2015 Nikos Mavrogiannopoulos

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License". -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GnuTLS 3.4.2: TPM API</title>

<meta name="description" content="GnuTLS 3.4.2: TPM API">
<meta name="keywords" content="GnuTLS 3.4.2: TPM API">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Function-and-Data-Index.html#Function-and-Data-Index" rel="index" title="Function and Data Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="API-reference.html#API-reference" rel="up" title="API reference">
<link href="Abstract-key-API.html#Abstract-key-API" rel="next" title="Abstract key API">
<link href="PKCS-11-API.html#PKCS-11-API" rel="prev" title="PKCS 11 API">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
body { 
	margin: 2%;
	padding: 0 5%;
	background: #ffffff;
}
h1,h2,h3,h4,h5 {
    font-weight: bold;
    padding: 5px 5px 5px 5px;
    background-color: #c2e0ff;
    color: #336699;
}
h1 {
    padding: 2em 2em 2em 5%;
    color: white;
    background: #336699;
    text-align: center;
    letter-spacing: 3px;
}
h2 { text-decoration: underline; }
pre {
  margin: 0 5%;
  padding: 0.5em;
}
pre.example,pre.verbatim {
  padding-bottom: 1em;

  border: solid #c2e0ff;
  background: #f0faff;
  border-width: 1px 1px 1px 5px;
  margin: 1em auto;
  width: 90%;
}

div.node {
  margin: 0 -5% 0 -2%;
  padding: 0.5em 0.5em;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  font-weight: bold;
}
dd, li {
  padding-top: 0.1em;
  padding-bottom: 0.1em;
}
div.float {

  margin-bottom: 0.5em;
  text-align: center;
}

table {
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  border-spacing: 7px;
  width: 50%;
}

th {
  padding: 0;
  color: #336699;
  background-color: #c2e0ff;
  border: solid #000000;
  border-width: 0px;
  margin: 1em auto;
  text-align: center;
  margin-left:auto;
  margin-right:auto;
}

td {
  padding: 0;
  border: solid #000000;
  background-color: #f0faff;
  border-width: 0px;
  margin: 1em auto;
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  padding-left: 1em;
}

dl {
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  width: 50%;

  padding-left: 1em;
  border: solid #c2e0ff;
  background: #f0faff;
  border-width: 5px 1px 1px 1px;
  margin: 1em auto;
}

-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="TPM-API"></a>
<div class="header">
<p>
Next: <a href="Abstract-key-API.html#Abstract-key-API" accesskey="n" rel="next">Abstract key API</a>, Previous: <a href="PKCS-11-API.html#PKCS-11-API" accesskey="p" rel="prev">PKCS 11 API</a>, Up: <a href="API-reference.html#API-reference" accesskey="u" rel="up">API reference</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Data-Index.html#Function-and-Data-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="TPM-API-1"></a>
<h3 class="section">E.9 TPM API</h3>

<p>The following functions are to be used for TPM handling.
Their prototypes lie in <samp>gnutls/tpm.h</samp>.
</p>

<a name="gnutls_005ftpm_005fget_005fregistered-1"></a>
<h4 class="subheading">gnutls_tpm_get_registered</h4>
<a name="gnutls_005ftpm_005fget_005fregistered"></a><dl>
<dt><a name="index-gnutls_005ftpm_005fget_005fregistered"></a>Function: <em>int</em> <strong>gnutls_tpm_get_registered</strong> <em>(gnutls_tpm_key_list_t * <var>list</var>)</em></dt>
<dd><p><var>list</var>: a list to store the keys
</p>
<p>This function will get a list of stored keys in the TPM. The uuid
of those keys
</p>
<p><strong>Returns:</strong> On success, <code>GNUTLS_E_SUCCESS</code>  (0) is returned, otherwise a
negative error value.
</p>
<p><strong>Since:</strong> 3.1.0
</p></dd></dl>

<a name="gnutls_005ftpm_005fkey_005flist_005fdeinit-1"></a>
<h4 class="subheading">gnutls_tpm_key_list_deinit</h4>
<a name="gnutls_005ftpm_005fkey_005flist_005fdeinit"></a><dl>
<dt><a name="index-gnutls_005ftpm_005fkey_005flist_005fdeinit"></a>Function: <em>void</em> <strong>gnutls_tpm_key_list_deinit</strong> <em>(gnutls_tpm_key_list_t <var>list</var>)</em></dt>
<dd><p><var>list</var>: a list of the keys
</p>
<p>This function will deinitialize the list of stored keys in the TPM.
</p>
<p><strong>Since:</strong> 3.1.0
</p></dd></dl>

<a name="gnutls_005ftpm_005fkey_005flist_005fget_005furl-1"></a>
<h4 class="subheading">gnutls_tpm_key_list_get_url</h4>
<a name="gnutls_005ftpm_005fkey_005flist_005fget_005furl"></a><dl>
<dt><a name="index-gnutls_005ftpm_005fkey_005flist_005fget_005furl"></a>Function: <em>int</em> <strong>gnutls_tpm_key_list_get_url</strong> <em>(gnutls_tpm_key_list_t <var>list</var>, unsigned int <var>idx</var>, char ** <var>url</var>, unsigned int <var>flags</var>)</em></dt>
<dd><p><var>list</var>: a list of the keys
</p>
<p><var>idx</var>: The index of the key (starting from zero)
</p>
<p><var>url</var>: The URL to be returned
</p>
<p><var>flags</var>: should be zero
</p>
<p>This function will return for each given index a URL of
the corresponding key.
If the provided index is out of bounds then <code>GNUTLS_E_REQUESTED_DATA_NOT_AVAILABLE</code> 
is returned.
</p>
<p><strong>Returns:</strong> On success, <code>GNUTLS_E_SUCCESS</code>  (0) is returned, otherwise a
negative error value.
</p>
<p><strong>Since:</strong> 3.1.0
</p></dd></dl>

<a name="gnutls_005ftpm_005fprivkey_005fdelete-1"></a>
<h4 class="subheading">gnutls_tpm_privkey_delete</h4>
<a name="gnutls_005ftpm_005fprivkey_005fdelete"></a><dl>
<dt><a name="index-gnutls_005ftpm_005fprivkey_005fdelete-2"></a>Function: <em>int</em> <strong>gnutls_tpm_privkey_delete</strong> <em>(const char * <var>url</var>, const char * <var>srk_password</var>)</em></dt>
<dd><p><var>url</var>: the URL describing the key
</p>
<p><var>srk_password</var>: a password for the SRK key
</p>
<p>This function will unregister the private key from the TPM
chip. 
</p>
<p><strong>Returns:</strong> On success, <code>GNUTLS_E_SUCCESS</code>  (0) is returned, otherwise a
negative error value.
</p>
<p><strong>Since:</strong> 3.1.0
</p></dd></dl>

<a name="gnutls_005ftpm_005fprivkey_005fgenerate-1"></a>
<h4 class="subheading">gnutls_tpm_privkey_generate</h4>
<a name="gnutls_005ftpm_005fprivkey_005fgenerate"></a><dl>
<dt><a name="index-gnutls_005ftpm_005fprivkey_005fgenerate-1"></a>Function: <em>int</em> <strong>gnutls_tpm_privkey_generate</strong> <em>(gnutls_pk_algorithm_t <var>pk</var>, unsigned int <var>bits</var>, const char * <var>srk_password</var>, const char * <var>key_password</var>, gnutls_tpmkey_fmt_t <var>format</var>, gnutls_x509_crt_fmt_t <var>pub_format</var>, gnutls_datum_t * <var>privkey</var>, gnutls_datum_t * <var>pubkey</var>, unsigned int <var>flags</var>)</em></dt>
<dd><p><var>pk</var>: the public key algorithm
</p>
<p><var>bits</var>: the security bits
</p>
<p><var>srk_password</var>: a password to protect the exported key (optional)
</p>
<p><var>key_password</var>: the password for the TPM (optional)
</p>
<p><var>format</var>: the format of the private key
</p>
<p><var>pub_format</var>: the format of the public key
</p>
<p><var>privkey</var>: the generated key
</p>
<p><var>pubkey</var>: the corresponding public key (may be null)
</p>
<p><var>flags</var>: should be a list of GNUTLS_TPM_* flags
</p>
<p>This function will generate a private key in the TPM
chip. The private key will be generated within the chip
and will be exported in a wrapped with TPM&rsquo;s master key
form. Furthermore the wrapped key can be protected with
the provided  <code>password</code> .
</p>
<p>Note that bits in TPM is quantized value. If the input value
is not one of the allowed values, then it will be quantized to
one of 512, 1024, 2048, 4096, 8192 and 16384.
</p>
<p>Allowed flags are:
</p>
<p><strong>Returns:</strong> On success, <code>GNUTLS_E_SUCCESS</code>  (0) is returned, otherwise a
negative error value.
</p>
<p><strong>Since:</strong> 3.1.0
</p></dd></dl>


<hr>
<div class="header">
<p>
Next: <a href="Abstract-key-API.html#Abstract-key-API" accesskey="n" rel="next">Abstract key API</a>, Previous: <a href="PKCS-11-API.html#PKCS-11-API" accesskey="p" rel="prev">PKCS 11 API</a>, Up: <a href="API-reference.html#API-reference" accesskey="u" rel="up">API reference</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Data-Index.html#Function-and-Data-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
