<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is last updated 4 March 2015 for version
3.4.6 of GnuTLS.

Copyright (C) 2001-2015 Free Software Foundation, Inc.\\
Copyright (C) 2001-2015 Nikos Mavrogiannopoulos

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License". -->
<!-- Created by GNU Texinfo 6.0, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GnuTLS 3.4.6: p11tool Invocation</title>

<meta name="description" content="GnuTLS 3.4.6: p11tool Invocation">
<meta name="keywords" content="GnuTLS 3.4.6: p11tool Invocation">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Function-and-Data-Index.html#Function-and-Data-Index" rel="index" title="Function and Data Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Smart-cards-and-HSMs.html#Smart-cards-and-HSMs" rel="up" title="Smart cards and HSMs">
<link href="Trusted-Platform-Module.html#Trusted-Platform-Module" rel="next" title="Trusted Platform Module">
<link href="Using-a-PKCS11-token-with-TLS.html#Using-a-PKCS11-token-with-TLS" rel="prev" title="Using a PKCS11 token with TLS">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space: nowrap}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: serif; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body { 
	margin: 2%;
	padding: 0 5%;
	background: #ffffff;
}
h1,h2,h3,h4,h5 {
    font-weight: bold;
    padding: 5px 5px 5px 5px;
    background-color: #c2e0ff;
    color: #336699;
}
h1 {
    padding: 2em 2em 2em 5%;
    color: white;
    background: #336699;
    text-align: center;
    letter-spacing: 3px;
}
h2 { text-decoration: underline; }
pre {
  margin: 0 5%;
  padding: 0.5em;
}
pre.example,pre.verbatim {
  padding-bottom: 1em;

  border: solid #c2e0ff;
  background: #f0faff;
  border-width: 1px 1px 1px 5px;
  margin: 1em auto;
  width: 90%;
}

div.node {
  margin: 0 -5% 0 -2%;
  padding: 0.5em 0.5em;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  font-weight: bold;
}
dd, li {
  padding-top: 0.1em;
  padding-bottom: 0.1em;
}
div.float {

  margin-bottom: 0.5em;
  text-align: center;
}

table {
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  border-spacing: 7px;
  width: 50%;
}

th {
  padding: 0;
  color: #336699;
  background-color: #c2e0ff;
  border: solid #000000;
  border-width: 0px;
  margin: 1em auto;
  text-align: center;
  margin-left:auto;
  margin-right:auto;
}

td {
  padding: 0;
  border: solid #000000;
  background-color: #f0faff;
  border-width: 0px;
  margin: 1em auto;
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  padding-left: 1em;
}

dl {
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  width: 50%;

  padding-left: 1em;
  border: solid #c2e0ff;
  background: #f0faff;
  border-width: 5px 1px 1px 1px;
  margin: 1em auto;
}

-->
</style>


</head>

<body lang="en">
<a name="p11tool-Invocation"></a>
<div class="header">
<p>
Previous: <a href="Using-a-PKCS11-token-with-TLS.html#Using-a-PKCS11-token-with-TLS" accesskey="p" rel="prev">Using a PKCS11 token with TLS</a>, Up: <a href="Smart-cards-and-HSMs.html#Smart-cards-and-HSMs" accesskey="u" rel="up">Smart cards and HSMs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Data-Index.html#Function-and-Data-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Invoking-p11tool"></a>
<h4 class="subsection">5.3.6 Invoking p11tool</h4>
<a name="index-p11tool"></a>


<p>Program that allows operations on PKCS #11 smart cards
and security modules. 
</p>
<p>To use PKCS #11 tokens with GnuTLS the p11-kit configuration files need to be setup.
That is create a .module file in /etc/pkcs11/modules with the contents &rsquo;module: /path/to/pkcs11.so&rsquo;.
Alternatively the configuration file /etc/gnutls/pkcs11.conf has to exist and contain a number
of lines of the form &rsquo;load=/usr/lib/opensc-pkcs11.so&rsquo;.
</p>
<p>You can provide the PIN to be used for the PKCS #11 operations with the environment variables
GNUTLS_PIN and GNUTLS_SO_PIN.
</p>

<p>This section was generated by <strong>AutoGen</strong>,
using the <code>agtexi-cmd</code> template and the option descriptions for the <code>p11tool</code> program.
This software is released under the GNU General Public License, version 3 or later.
</p>

<a name="p11tool-usage"></a><a name="p11tool-help_002fusage-_0028_002d_002dhelp_0029"></a>
<h4 class="subsection">5.3.7 p11tool help/usage (<samp>--help</samp>)</h4>
<a name="index-p11tool-help"></a>

<p>This is the automatically generated usage text for p11tool.
</p>
<p>The text printed is the same whether selected with the <code>help</code> option
(<samp>--help</samp>) or the <code>more-help</code> option (<samp>--more-help</samp>).  <code>more-help</code> will print
the usage text by passing it through a pager program.
<code>more-help</code> is disabled on platforms without a working
<code>fork(2)</code> function.  The <code>PAGER</code> environment variable is
used to select the program, defaulting to <samp>more</samp>.  Both will exit
with a status code of 0.
</p>
<div class="example">
<pre class="example">p11tool - GnuTLS PKCS #11 tool
Usage:  p11tool [ -&lt;flag&gt; [&lt;val&gt;] | --&lt;name&gt;[{=| }&lt;val&gt;] ]... [url]


Tokens:

       --list-tokens          List all available tokens
       --list-token-urls      List the URLs available tokens
       --list-mechanisms      List all available mechanisms in a token
       --initialize           Initializes a PKCS #11 token
       --set-pin=str          Specify the PIN to use on token initialization
       --set-so-pin=str       Specify the Security Officer's PIN to use on token initialization

Object listing:

       --list-all             List all available objects in a token
       --list-all-certs       List all available certificates in a token
       --list-certs           List all certificates that have an associated private key
       --list-all-privkeys    List all available private keys in a token
       --list-privkeys        an alias for the 'list-all-privkeys' option
       --list-keys            an alias for the 'list-all-privkeys' option
       --list-all-trusted     List all available certificates marked as trusted
       --export               Export the object specified by the URL
       --export-chain         Export the certificate specified by the URL and its chain of trust
       --export-pubkey        Export the public key for a private key
       --info                 List information on an available object in a token

Key generation:

       --generate-rsa         Generate an RSA private-public key pair
       --generate-dsa         Generate a DSA private-public key pair
       --generate-ecc         Generate an ECDSA private-public key pair
       --bits=num             Specify the number of bits for key generate
       --curve=str            Specify the curve used for EC key generation
       --sec-param=str        Specify the security level

Writing objects:

       --set-id=str           Set the CKA_ID (in hex) for the specified by the URL object
                                - prohibits the option 'write'
       --set-label=str        Set the CKA_LABEL for the specified by the URL object
                                - prohibits these options:
                                write
                                set-id
       --write                Writes the loaded objects to a PKCS #11 token
       --delete               Deletes the objects matching the given PKCS #11 URL
       --label=str            Sets a label for the write operation
       --id=str               Sets an ID for the write operation
       --mark-wrap            Marks the generated key to be a wrapping key
                                - disabled as '--no-mark-wrap'
       --mark-trusted         Marks the object to be written as trusted
                                - disabled as '--no-mark-trusted'
       --mark-decrypt         Marks the object to be written for decryption
                                - disabled as '--no-mark-decrypt'
   -!, --mark-sign            Marks the object to be written for signature generation
                                - disabled as '--no-mark-sign'
   -&quot;, --mark-ca              Marks the object to be written as a CA
                                - disabled as '--no-mark-ca'
   -#, --mark-private         Marks the object to be written as private
                                - disabled as '--no-mark-private'
                                - enabled by default
   -$, --trusted              an alias for the 'mark-trusted' option
   -%, --ca                   an alias for the 'mark-ca' option
   -&amp;, --private              an alias for the 'mark-private' option
                                - enabled by default
   -', --secret-key=str       Provide a hex encoded secret key
   -(, --load-privkey=file    Private key file to use
                                - file must pre-exist
   -), --load-pubkey=file     Public key file to use
                                - file must pre-exist
   -*, --load-certificate=file Certificate file to use
                                - file must pre-exist

Other options:

   -d, --debug=num            Enable debugging
                                - it must be in the range:
                                  0 to 9999
   -+, --outfile=str          Output file
   -,, --login                Force (user) login to token
                                - disabled as '--no-login'
   --, --so-login             Force security officer login to token
                                - disabled as '--no-so-login'
   -., --admin-login          an alias for the 'so-login' option
   -/, --test-sign            Tests the signature operation of the provided object
   -0, --generate-random=num  Generate random data
   -8, --pkcs8                Use PKCS #8 format for private keys
   -1, --inder                Use DER/RAW format for input
                                - disabled as '--no-inder'
   -2, --inraw                an alias for the 'inder' option
   -3, --outder               Use DER format for output certificates, private keys, and DH parameters
                                - disabled as '--no-outder'
   -4, --outraw               an alias for the 'outder' option
   -5, --provider=file        Specify the PKCS #11 provider library
                                - file must pre-exist
   -6, --detailed-url         Print detailed URLs
                                - disabled as '--no-detailed-url'
   -7, --batch                Disable all interaction with the tool

Version, usage and configuration options:

   -v, --version[=arg]        output version information and exit
   -h, --help                 display extended usage information and exit
   -!, --more-help            extended usage information passed thru pager

Options are specified by doubled hyphens and their name or by a single
hyphen and the flag character.
Operands and options may be intermixed.  They will be reordered.

Program that allows operations on PKCS #11 smart cards and security
modules.

To use PKCS #11 tokens with GnuTLS the p11-kit configuration files need to
be setup.  That is create a .module file in /etc/pkcs11/modules with the
contents 'module: /path/to/pkcs11.so'.  Alternatively the configuration
file /etc/gnutls/pkcs11.conf has to exist and contain a number of lines of
the form 'load=/usr/lib/opensc-pkcs11.so'.

You can provide the PIN to be used for the PKCS #11 operations with the
environment variables GNUTLS_PIN and GNUTLS_SO_PIN.

</pre></div>

<a name="p11tool-token_002drelated_002doptions"></a><a name="token_002drelated_002doptions-options"></a>
<h4 class="subsection">5.3.8 token-related-options options</h4>
<p>Tokens.
</p><a name="list_002dtoken_002durls-option_002e"></a>
<h4 class="subsubheading">list-token-urls option.</h4>
<a name="p11tool-list_002dtoken_002durls"></a>
<p>This is the &ldquo;list the urls available tokens&rdquo; option.
This is a more compact version of &ndash;list-tokens.
</p><a name="set_002dpin-option_002e"></a>
<h4 class="subsubheading">set-pin option.</h4>
<a name="p11tool-set_002dpin"></a>
<p>This is the &ldquo;specify the pin to use on token initialization&rdquo; option.
This option takes a string argument.
Alternatively the GNUTLS_PIN environment variable may be used.
</p><a name="set_002dso_002dpin-option_002e"></a>
<h4 class="subsubheading">set-so-pin option.</h4>
<a name="p11tool-set_002dso_002dpin"></a>
<p>This is the &ldquo;specify the security officer&rsquo;s pin to use on token initialization&rdquo; option.
This option takes a string argument.
Alternatively the GNUTLS_SO_PIN environment variable may be used.
<a name="p11tool-object_002dlist_002drelated_002doptions"></a></p><a name="object_002dlist_002drelated_002doptions-options"></a>
<h4 class="subsection">5.3.9 object-list-related-options options</h4>
<p>Object listing.
</p><a name="list_002dall_002dprivkeys-option_002e"></a>
<h4 class="subsubheading">list-all-privkeys option.</h4>
<a name="p11tool-list_002dall_002dprivkeys"></a>
<p>This is the &ldquo;list all available private keys in a token&rdquo; option.
Lists all the private keys in a token that match the specified URL.
</p><a name="list_002dprivkeys-option_002e"></a>
<h4 class="subsubheading">list-privkeys option.</h4>
<a name="p11tool-list_002dprivkeys"></a>
<p>This is an alias for the <code>list-all-privkeys</code> option,
see <a href="#p11tool-list_002dall_002dprivkeys">the list-all-privkeys option documentation</a>.
</p>
<a name="list_002dkeys-option_002e"></a>
<h4 class="subsubheading">list-keys option.</h4>
<a name="p11tool-list_002dkeys"></a>
<p>This is an alias for the <code>list-all-privkeys</code> option,
see <a href="#p11tool-list_002dall_002dprivkeys">the list-all-privkeys option documentation</a>.
</p>
<a name="export_002dchain-option_002e"></a>
<h4 class="subsubheading">export-chain option.</h4>
<a name="p11tool-export_002dchain"></a>
<p>This is the &ldquo;export the certificate specified by the url and its chain of trust&rdquo; option.
Exports the certificate specified by the URL and generates its chain of trust based on the stored certificates in the module.
</p><a name="export_002dpubkey-option_002e"></a>
<h4 class="subsubheading">export-pubkey option.</h4>
<a name="p11tool-export_002dpubkey"></a>
<p>This is the &ldquo;export the public key for a private key&rdquo; option.
Exports the public key for the specified private key
<a name="p11tool-keygen_002drelated_002doptions"></a></p><a name="keygen_002drelated_002doptions-options"></a>
<h4 class="subsection">5.3.10 keygen-related-options options</h4>
<p>Key generation.
</p><a name="generate_002drsa-option_002e"></a>
<h4 class="subsubheading">generate-rsa option.</h4>
<a name="p11tool-generate_002drsa"></a>
<p>This is the &ldquo;generate an rsa private-public key pair&rdquo; option.
Generates an RSA private-public key pair on the specified token.
</p><a name="generate_002ddsa-option_002e"></a>
<h4 class="subsubheading">generate-dsa option.</h4>
<a name="p11tool-generate_002ddsa"></a>
<p>This is the &ldquo;generate a dsa private-public key pair&rdquo; option.
Generates a DSA private-public key pair on the specified token.
</p><a name="generate_002decc-option_002e"></a>
<h4 class="subsubheading">generate-ecc option.</h4>
<a name="p11tool-generate_002decc"></a>
<p>This is the &ldquo;generate an ecdsa private-public key pair&rdquo; option.
Generates an ECDSA private-public key pair on the specified token.
</p><a name="curve-option_002e"></a>
<h4 class="subsubheading">curve option.</h4>
<a name="p11tool-curve"></a>
<p>This is the &ldquo;specify the curve used for ec key generation&rdquo; option.
This option takes a string argument.
Supported values are secp192r1, secp224r1, secp256r1, secp384r1 and secp521r1.
</p><a name="sec_002dparam-option_002e"></a>
<h4 class="subsubheading">sec-param option.</h4>
<a name="p11tool-sec_002dparam"></a>
<p>This is the &ldquo;specify the security level&rdquo; option.
This option takes a string argument <samp>Security parameter</samp>.
This is alternative to the bits option. Available options are [low, legacy, medium, high, ultra].
<a name="p11tool-write_002dobject_002drelated_002doptions"></a></p><a name="write_002dobject_002drelated_002doptions-options"></a>
<h4 class="subsection">5.3.11 write-object-related-options options</h4>
<p>Writing objects.
</p><a name="set_002did-option_002e"></a>
<h4 class="subsubheading">set-id option.</h4>
<a name="p11tool-set_002did"></a>
<p>This is the &ldquo;set the cka_id (in hex) for the specified by the url object&rdquo; option.
This option takes a string argument.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> must not appear in combination with any of the following options:
write.
</li></ul>

<p>Modifies or sets the CKA_ID in the specified by the URL object. The ID should be specified in hexadecimal format without a &rsquo;0x&rsquo; prefix.
</p><a name="set_002dlabel-option_002e"></a>
<h4 class="subsubheading">set-label option.</h4>
<a name="p11tool-set_002dlabel"></a>
<p>This is the &ldquo;set the cka_label for the specified by the url object&rdquo; option.
This option takes a string argument.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> must not appear in combination with any of the following options:
write, set-id.
</li></ul>

<p>Modifies or sets the CKA_LABEL in the specified by the URL object
</p><a name="write-option_002e"></a>
<h4 class="subsubheading">write option.</h4>
<a name="p11tool-write"></a>
<p>This is the &ldquo;writes the loaded objects to a pkcs #11 token&rdquo; option.
It can be used to write private keys, certificates or secret keys to a token. Must be combined with a &ndash;load option.
</p><a name="id-option_002e"></a>
<h4 class="subsubheading">id option.</h4>
<a name="p11tool-id"></a>
<p>This is the &ldquo;sets an id for the write operation&rdquo; option.
This option takes a string argument.
Sets the CKA_ID to be set by the write operation. The ID should be specified in hexadecimal format without a &rsquo;0x&rsquo; prefix.
</p><a name="mark_002dwrap-option_002e"></a>
<h4 class="subsubheading">mark-wrap option.</h4>
<a name="p11tool-mark_002dwrap"></a>
<p>This is the &ldquo;marks the generated key to be a wrapping key&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-mark-wrap.
</li></ul>

<p>Marks the generated key with the CKA_WRAP flag.
</p><a name="mark_002dtrusted-option_002e"></a>
<h4 class="subsubheading">mark-trusted option.</h4>
<a name="p11tool-mark_002dtrusted"></a>
<p>This is the &ldquo;marks the object to be written as trusted&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-mark-trusted.
</li></ul>

<p>Marks the object to be generated/written with the CKA_TRUST flag.
</p><a name="mark_002ddecrypt-option_002e"></a>
<h4 class="subsubheading">mark-decrypt option.</h4>
<a name="p11tool-mark_002ddecrypt"></a>
<p>This is the &ldquo;marks the object to be written for decryption&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-mark-decrypt.
</li></ul>

<p>Marks the object to be generated/written with the CKA_DECRYPT flag set to true.
</p><a name="mark_002dsign-option_002e"></a>
<h4 class="subsubheading">mark-sign option.</h4>
<a name="p11tool-mark_002dsign"></a>
<p>This is the &ldquo;marks the object to be written for signature generation&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-mark-sign.
</li></ul>

<p>Marks the object to be generated/written with the CKA_SIGN flag set to true.
</p><a name="mark_002dca-option_002e"></a>
<h4 class="subsubheading">mark-ca option.</h4>
<a name="p11tool-mark_002dca"></a>
<p>This is the &ldquo;marks the object to be written as a ca&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-mark-ca.
</li></ul>

<p>Marks the object to be generated/written with the CKA_CERTIFICATE_CATEGORY as CA.
</p><a name="mark_002dprivate-option_002e"></a>
<h4 class="subsubheading">mark-private option.</h4>
<a name="p11tool-mark_002dprivate"></a>
<p>This is the &ldquo;marks the object to be written as private&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-mark-private.
</li><li> It is enabled by default.
</li></ul>

<p>Marks the object to be generated/written with the CKA_PRIVATE flag. The written object will require a PIN to be used.
</p><a name="trusted-option_002e"></a>
<h4 class="subsubheading">trusted option.</h4>
<a name="p11tool-trusted"></a>
<p>This is an alias for the <code>mark-trusted</code> option,
see <a href="#p11tool-mark_002dtrusted">the mark-trusted option documentation</a>.
</p>
<a name="ca-option_002e"></a>
<h4 class="subsubheading">ca option.</h4>
<a name="p11tool-ca"></a>
<p>This is an alias for the <code>mark-ca</code> option,
see <a href="#p11tool-mark_002dca">the mark-ca option documentation</a>.
</p>
<a name="private-option_002e"></a>
<h4 class="subsubheading">private option.</h4>
<a name="p11tool-private"></a>
<p>This is an alias for the <code>mark-private</code> option,
see <a href="#p11tool-mark_002dprivate">the mark-private option documentation</a>.
</p>
<a name="secret_002dkey-option_002e"></a>
<h4 class="subsubheading">secret-key option.</h4>
<a name="p11tool-secret_002dkey"></a>
<p>This is the &ldquo;provide a hex encoded secret key&rdquo; option.
This option takes a string argument.
This secret key will be written to the module if &ndash;write is specified.
<a name="p11tool-other_002doptions"></a></p><a name="other_002doptions-options"></a>
<h4 class="subsection">5.3.12 other-options options</h4>
<p>Other options.
</p><a name="debug-option-_0028_002dd_0029_002e"></a>
<h4 class="subsubheading">debug option (-d).</h4>
<a name="p11tool-debug"></a>
<p>This is the &ldquo;enable debugging&rdquo; option.
This option takes a number argument.
Specifies the debug level.
</p><a name="so_002dlogin-option_002e"></a>
<h4 class="subsubheading">so-login option.</h4>
<a name="p11tool-so_002dlogin"></a>
<p>This is the &ldquo;force security officer login to token&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-so-login.
</li></ul>

<p>Forces login to the token as security officer (admin).
</p><a name="admin_002dlogin-option_002e"></a>
<h4 class="subsubheading">admin-login option.</h4>
<a name="p11tool-admin_002dlogin"></a>
<p>This is an alias for the <code>so-login</code> option,
see <a href="#p11tool-so_002dlogin">the so-login option documentation</a>.
</p>
<a name="test_002dsign-option_002e"></a>
<h4 class="subsubheading">test-sign option.</h4>
<a name="p11tool-test_002dsign"></a>
<p>This is the &ldquo;tests the signature operation of the provided object&rdquo; option.
It can be used to test the correct operation of the signature operation.
If both a private and a public key are available this operation will sign and verify
the signed data.
</p><a name="generate_002drandom-option_002e"></a>
<h4 class="subsubheading">generate-random option.</h4>
<a name="p11tool-generate_002drandom"></a>
<p>This is the &ldquo;generate random data&rdquo; option.
This option takes a number argument.
Asks the token to generate a number of bytes of random bytes.
</p><a name="inder-option_002e"></a>
<h4 class="subsubheading">inder option.</h4>
<a name="p11tool-inder"></a>
<p>This is the &ldquo;use der/raw format for input&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-inder.
</li></ul>

<p>Use DER/RAW format for input certificates and private keys.
</p><a name="inraw-option_002e"></a>
<h4 class="subsubheading">inraw option.</h4>
<a name="p11tool-inraw"></a>
<p>This is an alias for the <code>inder</code> option,
see <a href="#p11tool-inder">the inder option documentation</a>.
</p>
<a name="outder-option_002e"></a>
<h4 class="subsubheading">outder option.</h4>
<a name="p11tool-outder"></a>
<p>This is the &ldquo;use der format for output certificates, private keys, and dh parameters&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-outder.
</li></ul>

<p>The output will be in DER or RAW format.
</p><a name="outraw-option_002e"></a>
<h4 class="subsubheading">outraw option.</h4>
<a name="p11tool-outraw"></a>
<p>This is an alias for the <code>outder</code> option,
see <a href="#p11tool-outder">the outder option documentation</a>.
</p>
<a name="provider-option_002e"></a>
<h4 class="subsubheading">provider option.</h4>
<a name="p11tool-provider"></a>
<p>This is the &ldquo;specify the pkcs #11 provider library&rdquo; option.
This option takes a file argument.
This will override the default options in /etc/gnutls/pkcs11.conf
</p><a name="batch-option_002e"></a>
<h4 class="subsubheading">batch option.</h4>
<a name="p11tool-batch"></a>
<p>This is the &ldquo;disable all interaction with the tool&rdquo; option.
In batch mode there will be no prompts, all parameters need to be specified on command line.
<a name="p11tool-exit-status"></a></p><a name="p11tool-exit-status-1"></a>
<h4 class="subsection">5.3.13 p11tool exit status</h4>

<p>One of the following exit values will be returned:
</p><dl compact="compact">
<dt>&lsquo;<samp>0 (EXIT_SUCCESS)</samp>&rsquo;</dt>
<dd><p>Successful program execution.
</p></dd>
<dt>&lsquo;<samp>1 (EXIT_FAILURE)</samp>&rsquo;</dt>
<dd><p>The operation failed or the command syntax was not valid.
</p></dd>
</dl>
<a name="p11tool-See-Also"></a><a name="p11tool-See-Also-1"></a>
<h4 class="subsection">5.3.14 p11tool See Also</h4>
<p>certtool (1)
<a name="p11tool-Examples"></a></p><a name="p11tool-Examples-1"></a>
<h4 class="subsection">5.3.15 p11tool Examples</h4>
<p>To view all tokens in your system use:
</p><div class="example">
<pre class="example">$ p11tool --list-tokens
</pre></div>

<p>To view all objects in a token use:
</p><div class="example">
<pre class="example">$ p11tool --login --list-all &quot;pkcs11:TOKEN-URL&quot;
</pre></div>

<p>To store a private key and a certificate in a token run:
</p><div class="example">
<pre class="example">$ p11tool --login --write &quot;pkcs11:URL&quot; --load-privkey key.pem \
          --label &quot;Mykey&quot;
$ p11tool --login --write &quot;pkcs11:URL&quot; --load-certificate cert.pem \
          --label &quot;Mykey&quot;
</pre></div>
<p>Note that some tokens require the same label to be used for the certificate
and its corresponding private key.
</p>
<p>To generate an RSA private key inside the token use:
</p><div class="example">
<pre class="example">$ p11tool --login --generate-rsa --bits 1024 --label &quot;MyNewKey&quot; \
          --outfile MyNewKey.pub &quot;pkcs11:TOKEN-URL&quot;
</pre></div>
<p>The bits parameter in the above example is explicitly set because some
tokens only support limited choices in the bit length. The output file is the
corresponding public key. This key can be used to general a certificate
request with certtool.
</p><div class="example">
<pre class="example">certtool --generate-request --load-privkey &quot;pkcs11:KEY-URL&quot; \
   --load-pubkey MyNewKey.pub --outfile request.pem
</pre></div>

<hr>
<div class="header">
<p>
Previous: <a href="Using-a-PKCS11-token-with-TLS.html#Using-a-PKCS11-token-with-TLS" accesskey="p" rel="prev">Using a PKCS11 token with TLS</a>, Up: <a href="Smart-cards-and-HSMs.html#Smart-cards-and-HSMs" accesskey="u" rel="up">Smart cards and HSMs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Data-Index.html#Function-and-Data-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
