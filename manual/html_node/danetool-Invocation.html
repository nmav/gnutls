<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is last updated 4 March 2015 for version
3.4.5 of GnuTLS.

Copyright (C) 2001-2015 Free Software Foundation, Inc.\\
Copyright (C) 2001-2015 Nikos Mavrogiannopoulos

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License". -->
<!-- Created by GNU Texinfo 6.0, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GnuTLS 3.4.5: danetool Invocation</title>

<meta name="description" content="GnuTLS 3.4.5: danetool Invocation">
<meta name="keywords" content="GnuTLS 3.4.5: danetool Invocation">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Function-and-Data-Index.html#Function-and-Data-Index" rel="index" title="Function and Data Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="More-on-certificate-authentication.html#More-on-certificate-authentication" rel="up" title="More on certificate authentication">
<link href="Shared_002dkey-and-anonymous-authentication.html#Shared_002dkey-and-anonymous-authentication" rel="next" title="Shared-key and anonymous authentication">
<link href="ocsptool-Invocation.html#ocsptool-Invocation" rel="prev" title="ocsptool Invocation">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space: nowrap}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: serif; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body { 
	margin: 2%;
	padding: 0 5%;
	background: #ffffff;
}
h1,h2,h3,h4,h5 {
    font-weight: bold;
    padding: 5px 5px 5px 5px;
    background-color: #c2e0ff;
    color: #336699;
}
h1 {
    padding: 2em 2em 2em 5%;
    color: white;
    background: #336699;
    text-align: center;
    letter-spacing: 3px;
}
h2 { text-decoration: underline; }
pre {
  margin: 0 5%;
  padding: 0.5em;
}
pre.example,pre.verbatim {
  padding-bottom: 1em;

  border: solid #c2e0ff;
  background: #f0faff;
  border-width: 1px 1px 1px 5px;
  margin: 1em auto;
  width: 90%;
}

div.node {
  margin: 0 -5% 0 -2%;
  padding: 0.5em 0.5em;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  font-weight: bold;
}
dd, li {
  padding-top: 0.1em;
  padding-bottom: 0.1em;
}
div.float {

  margin-bottom: 0.5em;
  text-align: center;
}

table {
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  border-spacing: 7px;
  width: 50%;
}

th {
  padding: 0;
  color: #336699;
  background-color: #c2e0ff;
  border: solid #000000;
  border-width: 0px;
  margin: 1em auto;
  text-align: center;
  margin-left:auto;
  margin-right:auto;
}

td {
  padding: 0;
  border: solid #000000;
  background-color: #f0faff;
  border-width: 0px;
  margin: 1em auto;
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  padding-left: 1em;
}

dl {
  text-align: left;
  margin-left:auto;
  margin-right:auto;
  width: 50%;

  padding-left: 1em;
  border: solid #c2e0ff;
  background: #f0faff;
  border-width: 5px 1px 1px 1px;
  margin: 1em auto;
}

-->
</style>


</head>

<body lang="en">
<a name="danetool-Invocation"></a>
<div class="header">
<p>
Previous: <a href="ocsptool-Invocation.html#ocsptool-Invocation" accesskey="p" rel="prev">ocsptool Invocation</a>, Up: <a href="More-on-certificate-authentication.html#More-on-certificate-authentication" accesskey="u" rel="up">More on certificate authentication</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Data-Index.html#Function-and-Data-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Invoking-danetool"></a>
<h4 class="subsection">4.2.7 Invoking danetool</h4>
<a name="index-danetool"></a>


<p>Tool to generate and check DNS resource records for the DANE protocol.
</p>
<p>This section was generated by <strong>AutoGen</strong>,
using the <code>agtexi-cmd</code> template and the option descriptions for the <code>danetool</code> program.
This software is released under the GNU General Public License, version 3 or later.
</p>

<a name="danetool-usage"></a><a name="danetool-help_002fusage-_0028_002d_002dhelp_0029"></a>
<h4 class="subsubheading">danetool help/usage (<samp>--help</samp>)</h4>
<a name="index-danetool-help"></a>

<p>This is the automatically generated usage text for danetool.
</p>
<p>The text printed is the same whether selected with the <code>help</code> option
(<samp>--help</samp>) or the <code>more-help</code> option (<samp>--more-help</samp>).  <code>more-help</code> will print
the usage text by passing it through a pager program.
<code>more-help</code> is disabled on platforms without a working
<code>fork(2)</code> function.  The <code>PAGER</code> environment variable is
used to select the program, defaulting to <samp>more</samp>.  Both will exit
with a status code of 0.
</p>
<div class="example">
<pre class="example">danetool is unavailable - no --help
</pre></div>

<a name="danetool-debug"></a><a name="debug-option-_0028_002dd_0029-3"></a>
<h4 class="subsubheading">debug option (-d)</h4>

<p>This is the &ldquo;enable debugging&rdquo; option.
This option takes a number argument.
Specifies the debug level.
<a name="danetool-load_002dpubkey"></a></p><a name="load_002dpubkey-option-1"></a>
<h4 class="subsubheading">load-pubkey option</h4>

<p>This is the &ldquo;loads a public key file&rdquo; option.
This option takes a string argument.
This can be either a file or a PKCS #11 URL
<a name="danetool-load_002dcertificate"></a></p><a name="load_002dcertificate-option-1"></a>
<h4 class="subsubheading">load-certificate option</h4>

<p>This is the &ldquo;loads a certificate file&rdquo; option.
This option takes a string argument.
This can be either a file or a PKCS #11 URL
<a name="danetool-dlv"></a></p><a name="dlv-option"></a>
<h4 class="subsubheading">dlv option</h4>

<p>This is the &ldquo;sets a dlv file&rdquo; option.
This option takes a string argument.
This sets a DLV file to be used for DNSSEC verification.
<a name="danetool-hash"></a></p><a name="hash-option-1"></a>
<h4 class="subsubheading">hash option</h4>

<p>This is the &ldquo;hash algorithm to use for signing&rdquo; option.
This option takes a string argument.
Available hash functions are SHA1, RMD160, SHA256, SHA384, SHA512.
<a name="danetool-check"></a></p><a name="check-option"></a>
<h4 class="subsubheading">check option</h4>

<p>This is the &ldquo;check a host&rsquo;s dane tlsa entry&rdquo; option.
This option takes a string argument.
Obtains the DANE TLSA entry from the given hostname and prints information. Note that the actual certificate of the host can be provided using &ndash;load-certificate, otherwise danetool will connect to the server to obtain it. The exit code on verification success will be zero.
<a name="danetool-check_002dee"></a></p><a name="check_002dee-option"></a>
<h4 class="subsubheading">check-ee option</h4>

<p>This is the &ldquo;check only the end-entity&rsquo;s certificate&rdquo; option.
Checks the end-entity&rsquo;s certificate only. Trust anchors or CAs are not considered.
<a name="danetool-check_002dca"></a></p><a name="check_002dca-option"></a>
<h4 class="subsubheading">check-ca option</h4>

<p>This is the &ldquo;check only the ca&rsquo;s certificate&rdquo; option.
Checks the trust anchor&rsquo;s and CA&rsquo;s certificate only. End-entities are not considered.
<a name="danetool-tlsa_002drr"></a></p><a name="tlsa_002drr-option"></a>
<h4 class="subsubheading">tlsa-rr option</h4>

<p>This is the &ldquo;print the dane rr data on a certificate or public key&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> must appear in combination with the following options:
host.
</li></ul>

<p>This command prints the DANE RR data needed to enable DANE on a DNS server.
<a name="danetool-host"></a></p><a name="host-option"></a>
<h4 class="subsubheading">host option</h4>

<p>This is the &ldquo;specify the hostname to be used in the dane rr&rdquo; option.
This option takes a string argument <samp>Hostname</samp>.
This command sets the hostname for the DANE RR.
<a name="danetool-proto"></a></p><a name="proto-option"></a>
<h4 class="subsubheading">proto option</h4>

<p>This is the &ldquo;the protocol set for dane data (tcp, udp etc.)&rdquo; option.
This option takes a string argument <samp>Protocol</samp>.
This command specifies the protocol for the service set in the DANE data.
<a name="danetool-app_002dproto"></a></p><a name="app_002dproto-option"></a>
<h4 class="subsubheading">app-proto option</h4>

<p>This is the &ldquo;the application protocol to be used to obtain the server&rsquo;s certificate (https, ftp, smtp, imap)&rdquo; option.
This option takes a string argument.
When the server&rsquo;s certificate isn&rsquo;t provided danetool will connect to the server to obtain the certificate. In that case it is required to known the protocol to talk with the server prior to initiating the TLS handshake.
<a name="danetool-ca"></a></p><a name="ca-option"></a>
<h4 class="subsubheading">ca option</h4>

<p>This is the &ldquo;whether the provided certificate or public key is a certificate authority&rdquo; option.
Marks the DANE RR as a CA certificate if specified.
<a name="danetool-x509"></a></p><a name="x509-option"></a>
<h4 class="subsubheading">x509 option</h4>

<p>This is the &ldquo;use the hash of the x.509 certificate, rather than the public key&rdquo; option.
This option forces the generated record to contain the hash of the full X.509 certificate. By default only the hash of the public key is used.
<a name="danetool-local"></a></p><a name="local-option"></a>
<h4 class="subsubheading">local option</h4>

<p>This is an alias for the <code>domain</code> option,
see <a href="#danetool-domain">the domain option documentation</a>.
</p>
<a name="danetool-domain"></a><a name="domain-option"></a>
<h4 class="subsubheading">domain option</h4>

<p>This is the &ldquo;the provided certificate or public key is issued by the local domain&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-domain.
</li><li> It is enabled by default.
</li></ul>

<p>DANE distinguishes certificates and public keys offered via the DNSSEC to trusted and local entities. This flag indicates that this is a domain-issued certificate, meaning that there could be no CA involved.
<a name="danetool-local_002ddns"></a></p><a name="local_002ddns-option"></a>
<h4 class="subsubheading">local-dns option</h4>

<p>This is the &ldquo;use the local dns server for dnssec resolving&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-local-dns.
</li></ul>

<p>This option will use the local DNS server for DNSSEC.
This is disabled by default due to many servers not allowing DNSSEC.
<a name="danetool-insecure"></a></p><a name="insecure-option"></a>
<h4 class="subsubheading">insecure option</h4>

<p>This is the &ldquo;do not verify any dnssec signature&rdquo; option.
Ignores any DNSSEC signature verification results.
<a name="danetool-inder"></a></p><a name="inder-option-2"></a>
<h4 class="subsubheading">inder option</h4>

<p>This is the &ldquo;use der format for input certificates and private keys&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-inder.
</li></ul>

<p>The input files will be assumed to be in DER or RAW format. 
Unlike options that in PEM input would allow multiple input data (e.g. multiple 
certificates), when reading in DER format a single data structure is read.
<a name="danetool-inraw"></a></p><a name="inraw-option-1"></a>
<h4 class="subsubheading">inraw option</h4>

<p>This is an alias for the <code>inder</code> option,
see <a href="#danetool-inder">the inder option documentation</a>.
</p>
<a name="danetool-print_002draw"></a><a name="print_002draw-option"></a>
<h4 class="subsubheading">print-raw option</h4>

<p>This is the &ldquo;print the received dane data in raw format&rdquo; option.
</p>
<p>This option has some usage constraints.  It:
</p><ul>
<li> can be disabled with &ndash;no-print-raw.
</li></ul>

<p>This option will print the received DANE data.
<a name="danetool-quiet"></a></p><a name="quiet-option"></a>
<h4 class="subsubheading">quiet option</h4>

<p>This is the &ldquo;suppress several informational messages&rdquo; option.
In that case on the exit code can be used as an indication of verification success
<a name="danetool-exit-status"></a></p><a name="danetool-exit-status-1"></a>
<h4 class="subsubheading">danetool exit status</h4>

<p>One of the following exit values will be returned:
</p><dl compact="compact">
<dt>&lsquo;<samp>0 (EXIT_SUCCESS)</samp>&rsquo;</dt>
<dd><p>Successful program execution.
</p></dd>
<dt>&lsquo;<samp>1 (EXIT_FAILURE)</samp>&rsquo;</dt>
<dd><p>The operation failed or the command syntax was not valid.
</p></dd>
</dl>
<a name="danetool-See-Also"></a><a name="danetool-See-Also-1"></a>
<h4 class="subsubheading">danetool See Also</h4>
<p>certtool (1)
<a name="danetool-Examples"></a></p><a name="danetool-Examples-1"></a>
<h4 class="subsubheading">danetool Examples</h4>
<a name="DANE-TLSA-RR-generation"></a>
<h4 class="subsubheading">DANE TLSA RR generation</h4>

<p>To create a DANE TLSA resource record for a certificate (or public key) 
that was issued localy and may or may not be signed by a CA use the following command.
</p><div class="example">
<pre class="example">$ danetool --tlsa-rr --host www.example.com --load-certificate cert.pem
</pre></div>

<p>To create a DANE TLSA resource record for a CA signed certificate, which will
be marked as such use the following command.
</p><div class="example">
<pre class="example">$ danetool --tlsa-rr --host www.example.com --load-certificate cert.pem \
  --no-domain
</pre></div>

<p>The former is useful to add in your DNS entry even if your certificate is signed 
by a CA. That way even users who do not trust your CA will be able to verify your
certificate using DANE.
</p>
<p>In order to create a record for the CA signer of your certificate use the following.
</p><div class="example">
<pre class="example">$ danetool --tlsa-rr --host www.example.com --load-certificate cert.pem \
  --ca --no-domain
</pre></div>

<p>To read a server&rsquo;s DANE TLSA entry, use:
</p><div class="example">
<pre class="example">$ danetool --check www.example.com --proto tcp --port 443
</pre></div>

<p>To verify a server&rsquo;s DANE TLSA entry, use:
</p><div class="example">
<pre class="example">$ danetool --check www.example.com --proto tcp --port 443 --load-certificate chain.pem
</pre></div>

<hr>
<div class="header">
<p>
Previous: <a href="ocsptool-Invocation.html#ocsptool-Invocation" accesskey="p" rel="prev">ocsptool Invocation</a>, Up: <a href="More-on-certificate-authentication.html#More-on-certificate-authentication" accesskey="u" rel="up">More on certificate authentication</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Data-Index.html#Function-and-Data-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
